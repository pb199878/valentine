<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Be My Valentine?</title>
  <style>
    /* Global Styles */
    body {
      margin: 0;
      padding: 0;
      background: #fff0f0;
      font-family: Arial, sans-serif;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      position: relative;
    }
    
    /* Hearts container (bouncing hearts in background) */
    .hearts-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }
    
    /* Main content container for Valentine screen */
    .container {
      text-align: center;
      padding: 20px;
      border: 2px solid #ccc;
      border-radius: 10px;
      background-color: #ffffff;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      z-index: 1;
    }
    
    /* Style for the image above the Valentine box */
    .valentine-image {
      width: 12rem;
      height: 12rem;
      margin-bottom: 20px;
      border-radius: 5px;
    }
    
    h1 {
      margin-bottom: 20px;
      color: #333;
    }
    
    .btn {
      padding: 12px 24px;
      margin: 10px;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: transform 0.1s ease;
    }
    
    .btn:active {
      transform: scale(0.98);
    }
    
    .btn-green {
      background-color: #28a745;
      color: white;
    }
    
    .btn-red {
      background-color: #dc3545;
      color: white;
    }
    
    /* Success Screen (hidden by default) */
    .success-screen {
      display: none; /* Hidden by default */
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #fff0f0;
      z-index: 2;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
      box-sizing: border-box;
      position: relative;
    }
    
    .success-screen.active {
      display: flex; /* Shown when active */
    }

    /* Container that holds the success content and animated heart outline */
    .heart-outline-container {
      position: static;
      padding: 40px; /* Extra padding to ensure the outline doesn't overlap the content */
      display: inline-block;
    }
    
    /* Animated Heart Outline */
    .heart-outline-container svg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      stroke: red;
      stroke-width: 2;
      fill: none;
      stroke-dasharray: 1000;
      stroke-dashoffset: 1000;
      /* Apply two animations: one to draw the heart slowly and another for a sizzling/flicker effect */
      animation: drawHeart 10s ease-in-out forwards, sizzle 2s infinite;
    }

    @keyframes drawHeart {
      to { stroke-dashoffset: 0; }
    }
    
    /* Sizzle effect: subtle flicker in stroke color and drop-shadow */
    @keyframes sizzle {
      0% { stroke: red; filter: drop-shadow(0 0 2px red); }
      50% { stroke: darkred; filter: drop-shadow(0 0 5px orange); }
      100% { stroke: red; filter: drop-shadow(0 0 2px red); }
    }

    .success-image {
      height: 15rem;
      width: 15rem;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    .success-image-alt {
      display: none;
      height: 15rem;
      width: 15rem;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    .success-image-alt.active {
      display: flex; /* Shown when active */
    }

    /* Fireworks Container – covers the entire success screen */
    #fireworksContainer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
    }
    
    /* Rocket – rises from the bottom */
    .firework-rocket {
      position: absolute;
      bottom: 0;
      width: 4px;
      height: 20px;
      background: rgb(229, 82, 33);
      animation: rocketRise 1.5s ease-out forwards;
    }
    
    @keyframes rocketRise {
      0% { transform: translateY(0); opacity: 1; }
      80% { opacity: 1; }
      100% { transform: translateY(-50vh); opacity: 0; }
    }
    
    /* Spark – used for explosion */
    .spark {
      position: absolute;
      width: 4px;
      height: 4px;
      background: rgb(229, 82, 33);
      border-radius: 50%;
      opacity: 1;
      animation: sparkExplosion 2s ease-out forwards;
    }
    
    @keyframes sparkExplosion {
      0% { transform: translate(0, 0); opacity: 1; }
      100% { transform: translate(var(--dx), var(--dy)); opacity: 0; }
    }
    
    /* Regular Heart Shape (using pseudo-elements) */
    .heart {
      position: absolute;
      width: 50px;
      height: 45px;
    }
    .heart::before,
    .heart::after {
      content: "";
      position: absolute;
      top: 0;
      width: 25px;
      height: 40px;
      background: red;
      border-radius: 25px 25px 0 0;
    }
    .heart::before {
      left: 25px;
      transform: rotate(-45deg);
      transform-origin: 0 100%;
    }
    .heart::after {
      left: 0;
      transform: rotate(45deg);
      transform-origin: 100% 100%;
    }
    
    /* Picture Heart – 50% larger with background images and the same heart shape mask */
    .picture-heart {
      position: absolute;
      background-size: cover;
      background-position: center;
      /* Use the SVG mask defined below to get the same shape as the red hearts */
      mask: url(#heartMask);
      -webkit-mask: url(#heartMask);
      border: 2px solid #fff;
      box-shadow: 0 0 5px rgba(0,0,0,0.5);
    }
  </style>
</head>
<body>
  <!-- Inline SVG definition for the heart mask -->
  <svg width="0" height="0" style="position:absolute;">
    <defs>
      <mask id="heartMask" maskUnits="userSpaceOnUse" x="0" y="0" width="100" height="90">
        <!-- Heart shape path -->
        <path d="M49,7
        C40,-7,20,-7,10,7
        C-10,30,25,60,49,84
        C73,60,108,30,88,7
        C78,-7,58,-7,49,7
        Z" fill="white"/>
      </mask>
    </defs>
  </svg>    
  
  <!-- Bouncing Hearts Background -->
  <div class="hearts-container" id="hearts-container"></div>
  
  <!-- Main Valentine Screen -->
  <div class="container" id="mainContainer">
    <!-- Update the src to your local image generated from Apple's Image Playground -->
    <img src="./prat.png" alt="Valentine" class="valentine-image">
    <h1>Be my Valentine?</h1>
    <!-- Added id "yesButton" to the Yes button -->
    <button id="yesButton" class="btn btn-green" onclick="yesClicked()">Yes</button>
    <button id="noButton" class="btn btn-red" onclick="noClicked()">No</button>
  </div>
  
  <!-- Success Screen -->
  <div class="success-screen" id="successScreen">
    <!-- Fireworks Container -->
    <div id="fireworksContainer"></div>
    <div class="heart-outline-container">
        <!-- Placeholder images for the success screen -->
        <img onclick="image1Clicked()" src="./neha.png" alt="Congratulations" class="success-image" id="success-image">
        <img src="./IMG_6851.png" alt="Congratulations" class="success-image-alt" id="success-image-alt">
        <h2>Yeeee Love you My Queen</h2>
        <!-- Inline SVG for the animated heart outline with sizzling effect -->
        <svg viewBox="-10 -7 118 91" preserveAspectRatio="xMidYMid meet">
            <path d="M49,7
                     C40,-7,20,-7,10,7
                     C-10,30,25,60,49,84
                     C73,60,108,30,88,7
                     C78,-7,58,-7,49,7
                     Z" />
        </svg>
    </div>
  </div>
  
  <script>
    // Global variable for the Yes button's scale
    let yesScale = 1;

    // Array of messages for the "No" button
    const noMessages = [
      "Dun doit",
      "Please dun doit",
      "Dumpmaster",
      "Please",
      "I'll get you ice cream"
    ];
    let noIndex = 0;
    
    function yesClicked() {
      // Hide the main container and show the success screen.
      document.getElementById("mainContainer").style.display = "none";
      document.getElementById("successScreen").classList.add("active");
      startFireworks(); // Start fireworks when success screen is active
    }
    
    function noClicked() {
      const noButton = document.getElementById("noButton");
      noButton.textContent = noMessages[noIndex];
      noIndex = (noIndex + 1) % noMessages.length;
      
      // Increase the size of the Yes button each time No is pressed
      yesScale *= 1.1; // Increase by 10%
      document.getElementById("yesButton").style.transform = `scale(${yesScale})`;
    }

    function image1Clicked(){
        document.getElementById("success-image").style.display = "none";
        document.getElementById("success-image").classList.remove("active");
        document.getElementById("success-image-alt").classList.add("active");
    }

    // Bouncing Hearts Code (Background Animation)
    const hearts = [];
    const numberOfHearts = 5;
    const heartsContainer = document.getElementById("hearts-container");
    
    function createHeart() {
      const heart = document.createElement("div");
      heart.className = "heart";
      // Random scale between 0.75 and 1.25 for regular hearts
      const scale = Math.random() * 0.5 + 0.75;
      const heartWidth = 30 * scale;
      const heartHeight = 30 * scale;
      heart.style.width = heartWidth + "px";
      heart.style.height = heartHeight + "px";
      const containerWidth = window.innerWidth;
      const containerHeight = window.innerHeight;
      let posX = Math.random() * (containerWidth - heartWidth);
      let posY = Math.random() * (containerHeight - heartHeight);
      heart.style.left = posX + "px";
      heart.style.top = posY + "px";
      heartsContainer.appendChild(heart);
      // Random velocity between -2 and 2 pixels per frame
      let vx = (Math.random() * 4 - 2) || 1;
      let vy = (Math.random() * 4 - 2) || 1;
      const radius = ((heartWidth + heartHeight) / 4);
      hearts.push({ element: heart, posX, posY, vx, vy, scale, width: heartWidth, height: heartHeight, radius });
    }
    
    for (let i = 0; i < numberOfHearts; i++) {
      createHeart();
    }
    
    // Create 5 additional picture hearts (50% larger) with unique images.
    const pictureURLs = ['./IMG_7743.png', 'IMG_2474.png', 'IMG_3480.png', 'IMG_7644.png', 'IMG_6851.png', 'IMG_6486.png', 'IMG_5069.png', 'IMG_4927.png'];
    function createPictureHeart(imageURL) {
      const heart = document.createElement("div");
      heart.className = "picture-heart";
      // Multiply base dimensions (50x45) by 1.5 for picture hearts.
      const scale = 1;
      const heartWidth = 100 * scale;
      const heartHeight = 90 * scale;
      heart.style.width = heartWidth + "px";
      heart.style.height = heartHeight + "px";
      heart.style.backgroundImage = `url(${imageURL})`;
      const containerWidth = window.innerWidth;
      const containerHeight = window.innerHeight;
      let posX = Math.random() * (containerWidth - heartWidth);
      let posY = Math.random() * (containerHeight - heartHeight);
      heart.style.left = posX + "px";
      heart.style.top = posY + "px";
      heartsContainer.appendChild(heart);
      // Random velocity between -2 and 2 pixels per frame
      let vx = (Math.random() * 4 - 2) || 1;
      let vy = (Math.random() * 4 - 2) || 1;
      const radius = ((heartWidth + heartHeight) / 4);
      hearts.push({ element: heart, posX, posY, vx, vy, scale, width: heartWidth, height: heartHeight, radius });
    }
    
    pictureURLs.forEach(url => {
      createPictureHeart(url);
    });
    
    function animateHearts() {
      const maxWidth = window.innerWidth;
      const maxHeight = window.innerHeight;
      
      // Update positions and check for edge collisions
      hearts.forEach(heartObj => {
        heartObj.posX += heartObj.vx;
        heartObj.posY += heartObj.vy;
        heartObj.width = 50 * heartObj.scale;
        heartObj.height = 45 * heartObj.scale;
        heartObj.radius = ((heartObj.width + heartObj.height) / 4);
        
        if (heartObj.posX <= 0 || heartObj.posX + heartObj.width >= maxWidth) {
          heartObj.vx *= -1;
          heartObj.posX = Math.max(0, Math.min(heartObj.posX, maxWidth - heartObj.width));
        }
        if (heartObj.posY <= 0 || heartObj.posY + heartObj.height >= maxHeight) {
          heartObj.vy *= -1;
          heartObj.posY = Math.max(0, Math.min(heartObj.posY, maxHeight - heartObj.height));
        }
        heartObj.element.style.left = heartObj.posX + "px";
        heartObj.element.style.top = heartObj.posY + "px";
      });
      
      // Check for collisions between hearts and swap velocities
      for (let i = 0; i < hearts.length; i++) {
        for (let j = i + 1; j < hearts.length; j++) {
          const heartA = hearts[i];
          const heartB = hearts[j];
          const centerAX = heartA.posX + heartA.width / 2;
          const centerAY = heartA.posY + heartA.height / 2;
          const centerBX = heartB.posX + heartB.width / 2;
          const centerBY = heartB.posY + heartB.height / 2;
          const dx = centerBX - centerAX;
          const dy = centerBY - centerAY;
          const distance = Math.hypot(dx, dy);
          const minDist = heartA.radius + heartB.radius;
          if (distance < minDist && distance > 0) {
            const tempVx = heartA.vx;
            const tempVy = heartA.vy;
            heartA.vx = heartB.vx;
            heartA.vy = heartB.vy;
            heartB.vx = tempVx;
            heartB.vy = tempVy;
            const overlap = (minDist - distance) / 2;
            const adjustX = (dx / distance) * overlap;
            const adjustY = (dy / distance) * overlap;
            heartA.posX -= adjustX;
            heartA.posY -= adjustY;
            heartB.posX += adjustX;
            heartB.posY += adjustY;
          }
        }
      }
      
      requestAnimationFrame(animateHearts);
    }
    
    animateHearts();
    
    // Fireworks Animation on the Success Screen
    const fireworksContainer = document.getElementById("fireworksContainer");
    let fireworksInterval;
    
    // Launch a rocket firework from the bottom at a random horizontal position.
    function launchFirework() {
      const rocket = document.createElement("div");
      rocket.className = "firework-rocket";
      rocket.style.left = Math.random() * 80 + 10 + "vw"; // between 10vw and 90vw
      fireworksContainer.appendChild(rocket);
      
      // After the rocket's ascent (1.5s), get its final position and create the explosion.
      setTimeout(() => {
        const rect = rocket.getBoundingClientRect();
        const explosionX = rect.left + rect.width / 2;
        const explosionY = rect.top + rect.height / 2;
        rocket.remove();
        createExplosionAt(explosionX, explosionY);
      }, 1500);
    }
    
    // Create explosion sparks at a given (x, y) position.
    function createExplosionAt(x, y) {
      for (let i = 0; i < 20; i++) {
        const spark = document.createElement("div");
        spark.className = "spark";
        spark.style.left = x + "px";
        spark.style.top = y + "px";
        const angle = Math.random() * 2 * Math.PI;
        const distance = 80 + Math.random() * 300;
        const dx = Math.cos(angle) * distance + "px";
        const dy = Math.sin(angle) * distance + "px";
        spark.style.setProperty("--dx", dx);
        spark.style.setProperty("--dy", dy);
        fireworksContainer.appendChild(spark);
        setTimeout(() => { spark.remove(); }, 1000);
      }
    }
    
    // Start launching fireworks and stop after 10 seconds.
    function startFireworks() {
      fireworksInterval = setInterval(() => {
        if (document.getElementById("successScreen").classList.contains("active")) {
          launchFirework();
        }
      }, 300);
      setTimeout(() => {
        clearInterval(fireworksInterval);
      }, 10000);
    }
  </script>
</body>
</html>
